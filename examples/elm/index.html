<!doctype html>
<html lang="en" data-framework="elm">
<head>
	<meta charset="utf-8">
	<title>Elm â€¢ TodoMVC</title>
	<link rel="stylesheet" href="node_modules/todomvc-common/base.css">
	<link rel="stylesheet" href="node_modules/todomvc-app-css/index.css">
	<style>
		body {
			width: auto;
		}
		.todomvc-wrapper {
			visibility: visible !important;
		}
	</style>
</head>

<body>
<script src="elm.js"></script>
<script>
	(function () {
		var storedState = localStorage.getItem('elm-todo-state');
		var startingState = storedState ? JSON.parse(storedState) : null;

		var todomvc = Elm.fullscreen(Elm.Todo, { getStorage: startingState });
		todomvc.ports.focus.subscribe(function (selector) {
			setTimeout(function () {
				var nodes = document.querySelectorAll(selector);
				if (nodes.length === 1 && document.activeElement !== nodes[0]) {
					nodes[0].focus()
				}
			}, 50);
		});

		todomvc.ports.setStorage.subscribe(function (state) {
			localStorage.setItem('elm-todo-state', JSON.stringify(state));
		});
	}());
</script>
<script async src="node_modules/todomvc-common/base.js"></script>
</body>
</html>
